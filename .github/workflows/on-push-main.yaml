name: Main
on:
  push:
    branches: [main]
jobs:
  validate:
    uses: unbounded-tech/github-actions/.github/workflows/crossplane-validate.yaml@main
    with:
      examples: examples/sonarqubes/minimal.yaml examples/sonarqubes/standard.yaml
  test:
    uses: unbounded-tech/github-actions/.github/workflows/crossplane-test.yaml@main
    with:
      test-dir: tests/test-render
  version-and-tag:
    needs: [validate, test]
    uses: unbounded-tech/github-actions/.github/workflows/semantic-release.yaml@main
    secrets: inherit
